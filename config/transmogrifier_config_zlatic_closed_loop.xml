<?xml version="1.0"?>

<transmogrifierConfiguration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     xsi:noNamespaceSchemaLocation="transmogrifier_config.xsd">

    <global minimumVersion="4.2.1" frameSizePercentage="90"/>

    <project name="Zlatic Lab: Closed Loop"
             default="true"
             copyPreviousButtonVisible="false">

        <inputFileFilter patternString=".+\.txt"
                         recursiveSearch="true"/>

        <inputFileSorter sortAlgorithm="Path"/>

        <outputDirectory fileModeReadOnly="false">
            <path path="[//dm11.hhmi.org|/groups/zlatic]/zlaticlab/closed_loop" />
            <renameFieldValue prefix="/" fieldDisplayName="Rig"/>
            <renameFieldValue prefix="/" fieldDisplayName="Experimental Mode" pattern="([^_]+).*"/>
            <renameFieldValue prefix="/" fieldDisplayName="Experimental Mode" pattern="[^_]+?_(.*)"/>
            <renameFieldValue prefix="/" fieldDisplayName="Genotype 1"/>
            <renameFieldValue prefix="/" fieldDisplayName="Genotype 2"/>
            <renameFieldValue prefix="/" fieldDisplayName="Extension"/>
            <renameFieldValue prefix="/" fieldDisplayName="Experiment Timestamp" pattern="(\d{6}).*"/>
            <renameFieldValue prefix="/" fieldDisplayName="Experiment Timestamp" pattern="\d{6}(\d{2}).*"/>
        </outputDirectory>

        <plugins>
        </plugins>

        <dataFields>

            <validValueList displayName="Rig"
                            required="true"
                            autoComplete="true">
                <sourceFileDefault pattern="(.+?)@.+?@.+?@.+?@.+?@.*"/>
                <validValue value="t20"/>
            </validValueList>

            <separator value="@"/>

            <validValueList displayName="Experimental Mode"
                            required="true"
                            autoComplete="true">

                <sourceFileMappedDefault pattern=".+?@(.+?)@.+?@.+?@.+?@.*">
                    <mappedValue from="Operant_open_loop_with_context" to="Operant_OL_w_context" />
                    <mappedValue from="Operant_open_loop_without_context" to="Operant_OL_wo_context" />
                    <mappedValue from="Operant_closed_loop_with_pretest_bend" to="Operant_CL_bend" />
                    <mappedValue from="Operant_closed_loop_with_pretest_nonbend" to="Operant_CL_nonbend" />
                    <mappedValue from="Operant_closed_loop_with_pretest_left_bend" to="Operant_CL_left_bend" />
                    <mappedValue from="Operant_closed_loop_with_pretest_right_bend" to="Operant_CL_right_bend" />
                    <mappedValue from="Operant_closed_loop_with_pretest_backup" to="Operant_CL_backup" />
                </sourceFileMappedDefault>

                <sourceFileDefault pattern=".+?@(.+?)@.+?@.+?@.+?@.*"/>

                <validValue value="Operant_OL_w_context"/>
                <validValue value="Operant_OL_wo_context"/>
                <validValue value="Operant_CL_bend"/>
                <validValue value="Operant_CL_nonbend"/>
                <validValue value="Operant_CL_left_bend"/>
                <validValue value="Operant_CL_right_bend"/>
                <validValue value="Operant_CL_backup"/>
                <validValue value="Operant_no_light"/>
                <validValue value="Operant_OCL_roll"/>

                <validValue value="Bandit_unrestricted"/>

            </validValueList>

            <separator value="@"/>

            <webServiceList displayName="Genotype 1" required="true"
                            valueCreationPath="*/line"
                            relativeActualValuePath="name"
                            relativeValueDisplayNamePath="name"
                            serviceUrl="http://sage.int.janelia.org/sage-ws/lines/forMultipleLabs.janelia-sage?lab=dickson&amp;lab=fly&amp;lab=flylight&amp;lab=heberlein&amp;lab=jayaraman&amp;lab=leet&amp;lab=none&amp;lab=simpson&amp;lab=rubin&amp;lab=zlatic"
                            autoComplete="true">
                <sourceFileMappedDefault pattern=".+?@.+?@(.+?)@.+?@.+?@.*">
                    <mappedValue from="58E02-Gal4" to="GMR_58E02_AE_01" />
                    <mappedValue from="69F06-Gal4" to="GMR_69F06_AE_01" />
                    <mappedValue from="58E02-LexA" to="GMR_58E02_LJ_21" />
                    <mappedValue from="58E02-LexA;LexAop-CsChrimson,UAS-GCaMP6s" to="MZZ_K_86635" />
                    <mappedValue from="69E06-LexA" to="GMR_69E06_LJ_21" />
                    <mappedValue from="LexAop-Chronos-mCherry" to="VZJ_K_82674" />
                    <mappedValue from="LexAop-Chronos-mVenus" to="VZJ_K_82673" />
                    <mappedValue from="MB049B" to="GMR_MB049B" />
                    <mappedValue from="SS04261" to="JRC_SS04261" />
                    <mappedValue from="UAS-CsChrimson" to="VZJ_K_45195" />
                    <mappedValue from="UAS-CsChrimson;;58E02-Gal4" to="MZZ_K_99394" />
                    <mappedValue from="UAS-CsChrimson;;69F06-Gal4" to="MZZ_K_87093" />
                    <mappedValue from="UAS-CsChrimson;;72F11-Gal4" to="MZZ_K_87092" />
                    <mappedValue from="attP2" to="FCF_attP2_1500062" />
                    <mappedValue from="attP40" to="FCF_R_1500095" />
                    <mappedValue from="ppk1.9-Gal4" to="MZZ_ppk1d9GAL4" />
                </sourceFileMappedDefault>
                <sourceFileDefault pattern=".+?@.+?@(.+?)@.+?@.+?@.*"/>
            </webServiceList>

            <separator value="@"/>

            <webServiceList displayName="Genotype 2" required="true"
                            valueCreationPath="*/line"
                            relativeActualValuePath="name"
                            relativeValueDisplayNamePath="name"
                            serviceUrl="http://sage.int.janelia.org/sage-ws/lines/forMultipleLabs.janelia-sage?lab=dickson&amp;lab=fly&amp;lab=flylight&amp;lab=heberlein&amp;lab=jayaraman&amp;lab=leet&amp;lab=none&amp;lab=simpson&amp;lab=rubin&amp;lab=zlatic"
                            autoComplete="true">
                <sourceFileMappedDefault pattern=".+?@.+?@.+?@(.+?)@.+?@.*">
                    <mappedValue from="58E02-Gal4" to="GMR_58E02_AE_01" />
                    <mappedValue from="69F06-Gal4" to="GMR_69F06_AE_01" />
                    <mappedValue from="58E02-LexA" to="GMR_58E02_LJ_21" />
                    <mappedValue from="58E02-LexA;LexAop-CsChrimson,UAS-GCaMP6s" to="MZZ_K_86635" />
                    <mappedValue from="69E06-LexA" to="GMR_69E06_LJ_21" />
                    <mappedValue from="LexAop-Chronos-mCherry" to="VZJ_K_82674" />
                    <mappedValue from="LexAop-Chronos-mVenus" to="VZJ_K_82673" />
                    <mappedValue from="MB049B" to="GMR_MB049B" />
                    <mappedValue from="SS04261" to="JRC_SS04261" />
                    <mappedValue from="UAS-CsChrimson" to="VZJ_K_45195" />
                    <mappedValue from="UAS-CsChrimson;;58E02-Gal4" to="MZZ_K_99394" />
                    <mappedValue from="UAS-CsChrimson;;69F06-Gal4" to="MZZ_K_87093" />
                    <mappedValue from="UAS-CsChrimson;;72F11-Gal4" to="MZZ_K_87092" />
                    <mappedValue from="attP2" to="FCF_attP2_1500062" />
                    <mappedValue from="attP40" to="FCF_R_1500095" />
                    <mappedValue from="ppk1.9-Gal4" to="MZZ_ppk1d9GAL4" />
                </sourceFileMappedDefault>
                <sourceFileDefault pattern=".+?@.+?@.+?@(.+?)@.+?@.*"/>
            </webServiceList>

            <separator value="@"/>

            <date displayName="Experiment Timestamp" required="true"
                  datePattern="yyyyMMdd_HHmmss">
                <sourceFileDateDefault pattern=".+?@.+?@.+?@.+?@(\d{8}_\d{6})@.*"
                                       fromDatePattern="yyyyMMdd_HHmmss"
                                       toDatePattern="yyyyMMdd_HHmmss"/>
            </date>

            <separator value="@"/>

            <validValueList displayName="Extension"
                            required="true"
                            autoComplete="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@(.+?)\..*"/>
                <validValue value="contingent-data"/>
                <validValue value="data"/>
                <validValue value="yoked-data"/>
                <validValue value="LEDvals"/>
            </validValueList>

            <fileExtension/>

        </dataFields>

    </project>

</transmogrifierConfiguration>
