<?xml version="1.0"?>

<transmogrifierConfiguration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     xsi:noNamespaceSchemaLocation="transmogrifier_config.xsd">

    <!-- frameSizePercentage default is 80, min is 40, and max is 99 --> 
    <global minimumVersion="2.2.6"
            frameSizePercentage="95"/>

    <!-- replace "trautmane-ws:8080" with "wormtracker.int.janelia.org" for production  -->
    <project name="Kerr Lab: Multi-Worm Tracker" taskName="collector" default="true">

        <inputFileFilter patternString="(\d{8}_\d{6}){1}(.zip)?"
                         patternGroupNumber="1"
                         excludeQueryUrl="http://trautmane-ws:8080/wormtracker"
                         recursiveSearch="true"/>
        
        <plugins>
            <rowListener className="org.janelia.it.wormtracker.SummaryPrefixPlugin"/>
            <rowListener className="org.janelia.it.wormtracker.WormTrackerDataPlugin">
                <property name="dataServerUrl" value="http://trautmane-ws:8080/wormtracker"/>
                <property name="resourceField" value="Experiment"/>
            </rowListener>
        </plugins>

        <dataFields>

            <targetName displayName="Experiment"/>

            <validValueList displayName="Tracker" required="true" copyable="false">
                <pluginDefault className="org.janelia.it.wormtracker.SummaryDefaultValue">
                    <property name="pattern" value=".*_.*_.*_.*_([A-E]).*\.summary"/>
                </pluginDefault>
                <validValue displayName="A" value="A"/>
                <validValue displayName="B" value="B"/>
                <validValue displayName="C" value="C"/>
                <validValue displayName="D" value="D"/>
                <validValue displayName="E" value="E"/>
            </validValueList>

            <text displayName="Strain" required="true" pattern="[0-9A-Za-z\\(\\),@\.\\-]++" copyable="false">
                <pluginDefault className="org.janelia.it.wormtracker.SummaryDefaultValue">
                    <property name="pattern" value="(.*)_.*_.*_.*_.*\.summary"/>
                </pluginDefault>
            </text>

            <text displayName="Eggs" required="true" pattern="\d+(?:x\d+)?" copyable="false">
                <pluginDefault className="org.janelia.it.wormtracker.SummaryDefaultValue">
                    <property name="pattern" value=".*_(.*)_.*_.*_.*\.summary"/>
                </pluginDefault>
            </text>

            <text displayName="Food" required="true" pattern="[0-9A-Za-z\\(\\),@\.\\-]++" copyable="false">
                <pluginDefault className="org.janelia.it.wormtracker.SummaryDefaultValue">
                    <property name="pattern" value=".*_.*_(.*)_.*_.*\.summary"/>
                </pluginDefault>
            </text>

            <number displayName="Age" required="true" minimumValue="0"/>

            <decimal displayName="Temp" required="true"
                     minimumValue="10.0" maximumValue="30.0"/>

            <text displayName="Protocol" required="true" pattern="[0-9A-Za-z\\(\\),@\.\\-]++" copyable="false">
                <pluginDefault className="org.janelia.it.wormtracker.SummaryDefaultValue">
                    <property name="pattern" value=".*_.*_.*_(.*)_.*\.summary"/>
                </pluginDefault>
            </text>

            <text displayName="Plate Code" required="true" pattern="[0-9A-Za-z\\(\\),@\.\\-]++" copyable="false">
                <pluginDefault className="org.janelia.it.wormtracker.SummaryDefaultValue">
                    <property name="pattern" value=".*_.*_.*_.*_[A-E](.*)\.summary"/>
                </pluginDefault>
            </text>

            <text displayName="Visible Phenotypes" displayWidth="30" required="false" />

            <text displayName="Additional Notes" displayWidth="50" required="false" />

            <pluginData displayName="Prefix" />

            <fileRelativePath displayName="Path" visible="false"/>

        </dataFields>

    </project>

</transmogrifierConfiguration>