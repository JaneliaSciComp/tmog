<?xml version="1.0"?>

<transmogrifierConfiguration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     xsi:noNamespaceSchemaLocation="transmogrifier_config.xsd">

    <global minimumVersion="2.4.2"/>

    <project name="Zlatic Lab: ChaCRM verified Lines" default="true"
            copyPreviousButtonVisible="false">

        <inputFileFilter patternString=".+\.(png|blob|blobs|set|summary)"
                         recursiveSearch="true"/>

        <inputFileSorter sortAlgorithm="Path"/>

        <outputDirectory fileModeReadOnly="false">
            <path path="[\\dm11.isi.janelia.org|/groups/zlatic]\zlaticlab\Data\results\" />
            <renameFieldValue fieldDisplayName="Tracker"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Genotype"/>
            <renameFieldValue fieldDisplayName="Effector" prefix="@"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Times" prefix="_"/>
            <path path="@"/>
            <renameFieldValue fieldDisplayName="Animal Number"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Date"/>
            <renameFieldValue fieldDisplayName="Time" prefix="_"/>
        </outputDirectory>

        <plugins>
            <rowValidator className="org.janelia.it.chacrm.ChacrmLineValidator">
                <property name="linePropertyName" value="Genotype"/>
            </rowValidator>
        </plugins>

        <dataFields>
            <date displayName="Date" required="true"
                  datePattern="yyyyMMdd">
                <sourceFileDateDefault pattern=".*[/\\\\](\d{8})_\d{6}[/\\\\].*"
                                       fromDatePattern="yyyyMMdd"
                                       toDatePattern="yyyyMMdd"
                                       matchType="path"/>
            </date>

            <separator value="_"/>

            <date displayName="Time" required="true"
                  datePattern="HHmmss">
                <sourceFileDateDefault pattern=".*[/\\\\]\d{8}_(\d{6})[/\\\\].*"
                                       fromDatePattern="HHmmss"
                                       toDatePattern="HHmmss"
                                       matchType="path"/>
            </date>

            <separator value="@"/>

            <text displayName="Genotype" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern="(.+?)@.+?@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <text displayName="Effector" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@(.+?)@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <validValueList displayName="Tracker" required="true">
                <sourceFileDefault pattern=".+?@.+?@(.+?)@.+?@.+?@.*"/>
                <validValue value="t1"/>
                <validValue value="t2"/>
                <validValue value="t3"/>
                <validValue value="t4"/>
                <validValue value="t5"/>
                <validValue value="t6"/>
            </validValueList>

            <separator value="@"/>

            <validValueList displayName="Stimulus 1 Type" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@([^\$]+?)\$.+?@.+?@.+?@.+?@.*"/>
                <sourceFileDefault pattern=".*@([n])@n@n@n@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 1 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@[^\$]+?\$([^\$]+?)\$.+?@.+?@.+?@.+?@.*"/>
            </text>

            <text displayName="Stimulus 1 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?\$.+?\$(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 2 Type" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@([^\$]+?)\$.+?@.+?@.+?@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 2 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@[^\$]+?\$([^\$]+?)\$.+?@.+?@.+?@.*"/>
            </text>

            <text displayName="Stimulus 2 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?\$.+?\$(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)@.+?@.+?@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 3 Type" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@([^\$]+?)\$.+?@.+?@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 3 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@[^\$]+?\$([^\$]+?)\$.+?@.+?@.*"/>
            </text>

            <text displayName="Stimulus 3 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@.+?\$.+?\$(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)@.+?@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 4 Type" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@.+?@([^\$]+?)\$.+?@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 4 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@.+?@[^\$]+?\$([^\$]+?)\$.+?@.*"/>
            </text>

            <text displayName="Stimulus 4 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@.+?@.+?\$.+?\$(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)@.*"/>
            </text>

            <separator value="@"/>

            <number displayName="Animal Number" required="true"
                    minimumValue="0" maximumValue="100">
                <sourceFileDefault pattern=".+?@.+?@.+?@(.+?)@.+?@.*"/>
            </number>

            <separator value="@"/>

            <text displayName="Suffix" required="false"
                  copyable="false" pattern="^_\d{5}[\w]??$">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@.+?@.+?@([^@\.]+)??\..+"/>
            </text>

            <fileExtension/>
            
        </dataFields>

    </project>

    <project name="Zlatic Lab: Fix Already Renamed Files"
             copyPreviousButtonVisible="false">

        <inputFileFilter patternString=".+\.(png|blob|blobs|set|summary)"
                         recursiveSearch="true"/>

        <inputFileSorter sortAlgorithm="Path"/>

        <outputDirectory fileModeReadOnly="false">
            <path path="[\\dm11.isi.janelia.org|/groups/zlatic]\zlaticlab\Data\results\" />
            <renameFieldValue fieldDisplayName="Tracker"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Genotype"/>
            <renameFieldValue fieldDisplayName="Effector" prefix="@"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Times" prefix="_"/>
            <path path="@"/>
            <renameFieldValue fieldDisplayName="Animal Number"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Date"/>
            <renameFieldValue fieldDisplayName="Time" prefix="_"/>
        </outputDirectory>

        <plugins>
            <rowValidator className="org.janelia.it.chacrm.ChacrmLineValidator">
                <property name="linePropertyName" value="Genotype"/>
            </rowValidator>
        </plugins>

        <dataFields>
            <date displayName="Date" required="true"
                  datePattern="yyyyMMdd">
                <sourceFileDateDefault pattern=".*[/\\\\](\d{8})_\d{6}[/\\\\].*"
                                       fromDatePattern="yyyyMMdd"
                                       toDatePattern="yyyyMMdd"
                                       matchType="path"/>
            </date>

            <separator value="_"/>

            <date displayName="Time" required="true"
                  datePattern="HHmmss">
                <sourceFileDateDefault pattern=".*[/\\\\]\d{8}_(\d{6})[/\\\\].*"
                                       fromDatePattern="HHmmss"
                                       toDatePattern="HHmmss"
                                       matchType="path"/>
            </date>

            <separator value="@"/>

            <text displayName="Genotype" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@(.+?)@.+?@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <text displayName="Effector" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@.+?@(.+?)@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <validValueList displayName="Tracker" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@(.+?)@.+?@.+?@.*"/>
                <validValue value="t1"/>
                <validValue value="t2"/>
                <validValue value="t3"/>
                <validValue value="t4"/>
                <validValue value="t5"/>
                <validValue value="t6"/>
            </validValueList>

            <separator value="@"/>

            <validValueList displayName="Stimulus 1 Type" required="true">
                <sourceFileDefault pattern=".*@([^_]+?)_.*#.*#.*#.*@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 1 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".*@[^_]+?_([^_]+?)_.*#.*#.*#.*@.*"/>
            </text>

            <text displayName="Stimulus 1 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".*_(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)#.*#.*#.*@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 2 Type" required="true">
                <sourceFileDefault pattern=".*#([^_]+?)_.*#.*#.*@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 2 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".*#[^_]+?_([^_]+?)_.*#.*#.*@.*"/>
            </text>

            <text displayName="Stimulus 2 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".*#.*_(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)#.*#.*@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 3 Type" required="true">
                <sourceFileDefault pattern=".*#.*#([^_]+?)_.*#.*@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 3 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".*#.*#[^_]+?_([^_]+?)_.*#.*@.*"/>
            </text>

            <text displayName="Stimulus 3 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".*#.*#.*_(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)#.*@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 4 Type" required="true">
                <sourceFileDefault pattern=".*#.*#.*#([^_]+?)_.*@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 4 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".*#.*#.*#[^_]+?_([^_]+?)_.*@.*"/>
            </text>

            <text displayName="Stimulus 4 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".*#.*#.*#.*_(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)@.*"/>
            </text>

            <separator value="@"/>

            <number displayName="Animal Number" required="true"
                    minimumValue="0" maximumValue="100">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@(.+?)@.*"/>
            </number>

            <separator value="@"/>

            <text displayName="Suffix" required="false"
                  copyable="false" pattern="^_\d{5}[\w]??$">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@([^@\.]+)??\..+"/>
            </text>

            <fileExtension/>
            
        </dataFields>

    </project>

    <project name="Zlatic Lab: Fix Already Renamed Files With Space In Suffix"
             copyPreviousButtonVisible="false">

        <inputFileFilter patternString=".+@ [_0-9]*\.(png|blob|blobs|set|summary)"
                         recursiveSearch="true"/>

        <inputFileSorter sortAlgorithm="Path"/>

        <outputDirectory fileModeReadOnly="false">
            <path path="[\\dm11.isi.janelia.org|/groups/zlatic]\zlaticlab\Data\results\" />
            <renameFieldValue fieldDisplayName="Tracker"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Genotype"/>
            <renameFieldValue fieldDisplayName="Effector" prefix="@"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 2 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 3 Times" prefix="_"/>
            <path path="#"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 4 Times" prefix="_"/>
            <path path="@"/>
            <renameFieldValue fieldDisplayName="Animal Number"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Date"/>
            <renameFieldValue fieldDisplayName="Time" prefix="_"/>
        </outputDirectory>

        <plugins>
            <rowValidator className="org.janelia.it.chacrm.ChacrmLineValidator">
                <property name="linePropertyName" value="Genotype"/>
            </rowValidator>
        </plugins>

        <dataFields>
            <date displayName="Date" required="true"
                  datePattern="yyyyMMdd">
                <sourceFileDateDefault pattern=".*[/\\\\](\d{8})_\d{6}[/\\\\].*"
                                       fromDatePattern="yyyyMMdd"
                                       toDatePattern="yyyyMMdd"
                                       matchType="path"/>
            </date>

            <separator value="_"/>

            <date displayName="Time" required="true"
                  datePattern="HHmmss">
                <sourceFileDateDefault pattern=".*[/\\\\]\d{8}_(\d{6})[/\\\\].*"
                                       fromDatePattern="HHmmss"
                                       toDatePattern="HHmmss"
                                       matchType="path"/>
            </date>

            <separator value="@"/>

            <text displayName="Genotype" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@(.+?)@.+?@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <text displayName="Effector" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@.+?@(.+?)@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <validValueList displayName="Tracker" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@(.+?)@.+?@.+?@.*"/>
                <validValue value="t1"/>
                <validValue value="t2"/>
                <validValue value="t3"/>
                <validValue value="t4"/>
                <validValue value="t5"/>
                <validValue value="t6"/>
            </validValueList>

            <separator value="@"/>

            <validValueList displayName="Stimulus 1 Type" required="true">
                <sourceFileDefault pattern=".*@([^_]+?)_.*#.*#.*#.*@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 1 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".*@[^_]+?_([^_]+?)_.*#.*#.*#.*@.*"/>
            </text>

            <text displayName="Stimulus 1 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".*_(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)#.*#.*#.*@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 2 Type" required="true">
                <sourceFileDefault pattern=".*#([^_]+?)_.*#.*#.*@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 2 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".*#[^_]+?_([^_]+?)_.*#.*#.*@.*"/>
            </text>

            <text displayName="Stimulus 2 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".*#.*_(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)#.*#.*@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 3 Type" required="true">
                <sourceFileDefault pattern=".*#.*#([^_]+?)_.*#.*@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 3 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".*#.*#[^_]+?_([^_]+?)_.*#.*@.*"/>
            </text>

            <text displayName="Stimulus 3 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".*#.*#.*_(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)#.*@.*"/>
            </text>

            <separator value="#"/>

            <validValueList displayName="Stimulus 4 Type" required="true">
                <sourceFileDefault pattern=".*#.*#.*#([^_]+?)_.*@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="g: green" value="g"/>
                <validValue displayName="a: blue" value="a"/>
                <validValue displayName="l: light" value="l"/>
                <validValue displayName="i: IR pinch" value="i"/>
                <validValue displayName="h: hot" value="h"/>
                <validValue displayName="c: cold" value="c"/>
                <validValue displayName="t: temperature" value="t"/>
                <validValue displayName="o: hole" value="o"/>
                <validValue displayName="s: scratch" value="s"/>
                <validValue displayName="r: channel rhodopsin" value="r"/>
                <validValue displayName="y: yeast" value="y"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 4 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".*#.*#.*#[^_]+?_([^_]+?)_.*@.*"/>
            </text>

            <text displayName="Stimulus 4 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".*#.*#.*#.*_(\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s)@.*"/>
            </text>

            <separator value="@"/>

            <number displayName="Animal Number" required="true"
                    minimumValue="0" maximumValue="100">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@(.+?)@.*"/>
            </number>

            <separator value="@"/>

            <text displayName="Suffix" required="false"
                  copyable="false" pattern="^_\d{5}[\w]??$">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.+?@ ([^@\.]+)??\..+"/>
            </text>

            <fileExtension/>

        </dataFields>

    </project>

    <project name="Zlatic Lab: Fix Trial Runs"
            copyPreviousButtonVisible="false">

        <inputFileFilter patternString=".+\.(png|blob|blobs|set|summary)"
                         recursiveSearch="true"/>

        <inputFileSorter sortAlgorithm="Path"/>

        <outputDirectory fileModeReadOnly="false">
            <path path="[\\dm11.isi.janelia.org|/groups/zlatic]\zlaticlab\Data\results\t1\" />
            <renameFieldValue fieldDisplayName="Genotype" prefix="2009_"/>
            <renameFieldValue fieldDisplayName="Effector" prefix="@"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Type"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Specs" prefix="_"/>
            <renameFieldValue fieldDisplayName="Stimulus 1 Times" prefix="_"/>
            <path path="#n#n#n@"/>
            <renameFieldValue fieldDisplayName="Animal Number"/>
            <path path="/"/>
            <renameFieldValue fieldDisplayName="Date"/>
            <renameFieldValue fieldDisplayName="Time" prefix="_"/>
        </outputDirectory>

        <plugins>
        </plugins>

        <dataFields>
            <date displayName="Date" required="true"
                  datePattern="yyyyMMdd">
                <sourceFileDateDefault pattern=".*[/\\\\](\d{8})_\d{6}[/\\\\].*"
                                       fromDatePattern="yyyyMMdd"
                                       toDatePattern="yyyyMMdd"
                                       matchType="path"/>
            </date>

            <separator value="_"/>

            <date displayName="Time" required="true"
                  datePattern="HHmmss">
                <sourceFileDateDefault pattern=".*[/\\\\]\d{8}_(\d{6})[/\\\\].*"
                                       fromDatePattern="HHmmss"
                                       toDatePattern="HHmmss"
                                       matchType="path"/>
            </date>

            <separator value="@2009_"/>

            <text displayName="Genotype" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@(.+?)@.+?@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <text displayName="Effector" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@.+?@(.+?)@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <validValueList displayName="Tracker" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@(.+?)@.+?@.+?@.*"/>
                <validValue value="t1"/>
                <validValue value="t2"/>
                <validValue value="t3"/>
                <validValue value="t4"/>
                <validValue value="t5"/>
                <validValue value="t6"/>
            </validValueList>

            <separator value="@"/>

            <validValueList displayName="Stimulus 1 Type" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@([bnp]).+?@.+?@.*"/>
                <validValue displayName="p: puff" value="p"/>
                <validValue displayName="b: buzz" value="b"/>
                <validValue displayName="n: none" value="n" default="true"/>
            </validValueList>

            <text displayName="Stimulus 1 Specs" required="false"
                  pattern="[0-9A-Za-z]++" prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@(top)1a\d\ds\d\d??x\d.+?@.*"/>
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@(?:\d\d*?a)?+(.+?)\d\ds\d\d??x\d.+?@.*"/>
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@(?:\d\d*?a)?+(..[^s].+?)@.*"/>
            </text>

            <text displayName="Stimulus 1 Times" required="false"
                  pattern="^\d+(\.\d+)*s\d+x\d+(\.\d+)*s\d+(\.\d+)*s$"
                  prefix="_">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@.*?(\d\ds\d\d??x\d.+?)@.*"/>
            </text>

            <separator value="#n#n#n@"/>

            <number displayName="Animal Number" required="true"
                    minimumValue="0" maximumValue="100">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@top(1)a.+?@.*"/>
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@(\d\d*?)a.+?@.*"/>
            </number>

            <separator value="@"/>

            <!--
                NOTE: no validation here since these runs should have been
                valid and they don't follow the _\d{5} pattern (no underscore)
            -->
            <fileName displayName="Suffix"
                      patternString=".+?@.+?@.+?@.+?@.+?@.+?@([^@\.]+)??\..+"
                      patternGroupNumber="1"
                      visible="true" />

            <fileExtension/>

        </dataFields>

    </project>

</transmogrifierConfiguration>
