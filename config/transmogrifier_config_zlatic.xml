<?xml version="1.0"?>

<transmogrifierConfiguration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                     xsi:noNamespaceSchemaLocation="transmogrifier_config.xsd">

    <global minimumVersion="2.2.9"/>

    <project name="Zlatic Lab: ChaCRM verified Lines" default="true">

        <inputFileFilter patternString=".+\.(png|blob|summary)"
                         recursiveSearch="true"/>

        <inputFileSorter sortAlgorithm="Path"/>

        <outputDirectory>
            <path path="[\\dm4.int.janelia.org|/groups/zlatic]\zlaticlab\Data\results\" />
            <renameFieldValue fieldDisplayName="Tracker" suffix="\"/>
            <renameFieldValue fieldDisplayName="Date and Time" />
        </outputDirectory>

        <plugins>
            <rowValidator className="org.janelia.it.chacrm.ChacrmLineValidator">
                <property name="linePropertyName" value="Genotype"/>
            </rowValidator>
        </plugins>

        <dataFields>
            <date displayName="Date and Time" required="true"
                  datePattern="yyyyMMdd_HHmmss">
                <sourceFileDateDefault pattern=".*[/\\\\](\d{8}_\d{6})[/\\\\].*"
                                       fromDatePattern="yyyyMMdd_HHmmss"
                                       toDatePattern="yyyyMMdd_HHmmss"
                                       matchType="path"/>
            </date>

            <separator value="@"/>

            <text displayName="Genotype" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern="(.+?)@.+?@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <text displayName="Effector" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@(.+?)@.+?@.+?@.+?@.*"/>
            </text>

            <separator value="@"/>

            <validValueList displayName="Tracker" required="true">
                <sourceFileDefault pattern=".+?@.+?@(.+?)@.+?@.+?@.*"/>
                <validValue value="t1"/>
                <validValue value="t2"/>
                <validValue value="t3"/>
                <validValue value="t4"/>
                <validValue value="t5"/>
            </validValueList>

            <separator value="@"/>

            <validValueList displayName="Stimulus" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@(.+?)@.+?@.*"/>
                <validValue displayName="puff" value="puff"/>
                <validValue displayName="buzz" value="buzz"/>
                <validValue displayName="green" value="green"/>
                <validValue displayName="blue" value="blue"/>
                <validValue displayName="light" value="light"/>
                <validValue displayName="pinch" value="pinch"/>
                <validValue displayName="hot" value="hot"/>
                <validValue displayName="cold" value="cold"/>
                <validValue displayName="hole" value="hole"/>
                <validValue displayName="scratch" value="scratch"/>
                <validValue displayName="chr: channel rhodopsin" value="chr"/>
            </validValueList>

            <separator value="@"/>

            <text displayName="Protocol" required="true"
                  pattern="[0-9A-Za-z]++">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@(.+?)@.*"/>
            </text>

            <separator value="@"/>

            <fileName displayName="Suffix"
                      patternString=".+?@.+?@.+?@.+?@.+?@([^@\.]+)??\..+"
                      patternGroupNumber="1"
                      visible="true" />

            <fileExtension/>
            
        </dataFields>

    </project>

    <project name="Zlatic Lab: Fix 0930" default="true">

        <inputFileFilter patternString=".+\.(png|blob|summary)"
                         recursiveSearch="true"/>

        <inputFileSorter sortAlgorithm="Path"/>

        <outputDirectory>
            <path path="[\\dm4.int.janelia.org|/groups/zlatic]\zlaticlab\Data\results\" />
            <renameFieldValue fieldDisplayName="Tracker" suffix="\"/>
            <renameFieldValue fieldDisplayName="Date and Time" />
        </outputDirectory>

        <plugins>
            <rowValidator className="org.janelia.it.chacrm.ChacrmLineValidator">
                <property name="linePropertyName" value="Genotype"/>
            </rowValidator>
        </plugins>

        <dataFields>
            <date displayName="Date and Time" required="true"
                  datePattern="yyyyMMdd_HHmmss">
                <sourceFileDateDefault pattern=".*[/\\\\](\d{8}_\d{6})[/\\\\].*"
                                       fromDatePattern="yyyyMMdd_HHmmss"
                                       toDatePattern="yyyyMMdd_HHmmss"
                                       matchType="path"/>
            </date>

            <separator value="@"/>

            <text displayName="Genotype" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@(.+?)@.*"/>
            </text>

            <separator value="@"/>

            <text displayName="Effector" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <sourceFileDefault pattern=".+?@.+?@(.+?)@.*"/>
            </text>

            <separator value="@"/>

            <validValueList displayName="Tracker" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@(.+?)@.*"/>
                <validValue value="t1"/>
                <validValue value="t2"/>
                <validValue value="t3"/>
                <validValue value="t4"/>
                <validValue value="t5"/>
            </validValueList>

            <separator value="@"/>

            <validValueList displayName="Stimulus" required="true">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@(.+?)@.*"/>
                <validValue displayName="puff" value="puff"/>
                <validValue displayName="buzz" value="buzz"/>
                <validValue displayName="green" value="green"/>
                <validValue displayName="blue" value="blue"/>
                <validValue displayName="light" value="light"/>
                <validValue displayName="pinch" value="pinch"/>
                <validValue displayName="hot" value="hot"/>
                <validValue displayName="cold" value="cold"/>
                <validValue displayName="hole" value="hole"/>
                <validValue displayName="scratch" value="scratch"/>
                <validValue displayName="chr: channel rhodopsin" value="chr"/>
            </validValueList>

            <separator value="@"/>

            <text displayName="Protocol" required="true"
                  pattern="[0-9A-Za-z]++">
                <sourceFileDefault pattern=".+?@.+?@.+?@.+?@.+?@(.+?)[_\.].*"/>
            </text>

            <separator value="@"/>

            <fileName displayName="Suffix"
                      patternString=".+?@[^_]+(_[^\.]+)??\..+"
                      patternGroupNumber="1"
                      visible="true" />

            <fileExtension/>

        </dataFields>

    </project>

    <project name="Zlatic Lab: Fix 0916" default="true">

        <inputFileFilter patternString=".+\.(png|blob|summary)"
                         recursiveSearch="true"/>

        <inputFileSorter sortAlgorithm="Path"/>

        <outputDirectory>
            <path path="[\\dm4.int.janelia.org|/groups/zlatic]\zlaticlab\Data\results\" />
            <renameFieldValue fieldDisplayName="Tracker" suffix="\"/>
            <renameFieldValue fieldDisplayName="Date and Time" />
        </outputDirectory>

        <plugins>
            <rowValidator className="org.janelia.it.chacrm.ChacrmLineValidator">
                <property name="linePropertyName" value="Genotype"/>
            </rowValidator>
        </plugins>

        <dataFields>
            <date displayName="Date and Time" required="true"
                  datePattern="yyyyMMdd_HHmmss">
                <sourceFileDateDefault pattern=".*[/\\\\](\d{8}_\d{6})[/\\\\].*"
                                       fromDatePattern="yyyyMMdd_HHmmss"
                                       toDatePattern="yyyyMMdd_HHmmss"
                                       matchType="path"/>
            </date>

            <separator value="@"/>

            <text displayName="Genotype" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <staticDefault value="w1118"/>
            </text>

            <separator value="@"/>

            <text displayName="Effector" required="true"
                  pattern="[0-9A-Za-z\-\_]++">
                <staticDefault value="none"/>
            </text>

            <separator value="@"/>

            <validValueList displayName="Tracker" required="true">
                <validValue value="t1" default="true"/>
                <validValue value="t2"/>
                <validValue value="t3"/>
                <validValue value="t4"/>
                <validValue value="t5"/>
            </validValueList>

            <separator value="@"/>

            <validValueList displayName="Stimulus" required="true">
                <validValue displayName="puff" value="puff" default="true"/>
                <validValue displayName="buzz" value="buzz"/>
                <validValue displayName="green" value="green"/>
                <validValue displayName="blue" value="blue"/>
                <validValue displayName="light" value="light"/>
                <validValue displayName="pinch" value="pinch"/>
                <validValue displayName="hot" value="hot"/>
                <validValue displayName="cold" value="cold"/>
                <validValue displayName="hole" value="hole"/>
                <validValue displayName="scratch" value="scratch"/>
                <validValue displayName="chr: channel rhodopsin" value="chr"/>
            </validValueList>

            <separator value="@"/>

            <text displayName="Protocol" required="true"
                  pattern="[0-9A-Za-z]++">
            </text>

            <separator value="@"/>

            <fileName displayName="Suffix"
                      patternString=".*puff.{11}(.*)\..+"
                      patternGroupNumber="1"
                      visible="true" />

            <fileExtension/>

        </dataFields>

    </project>


</transmogrifierConfiguration>